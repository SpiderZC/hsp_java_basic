# 面向对象高级

## 类变量和类方法

### 类变量

#### 共识

1. static变量是同一个类所有对象共享

2. static类变量，在类加载的时候就生成了

#### 定义

> 类变量也叫静态变量/静态属性，是该类的所有对象共享的变量，任何一个该类的对象去访问它时，取到的都是相同的值，同样任何一个该类的对象去修改它时，修改的也是同一个变量。

#### 语法

> 访问修饰符 static 数据类型 变量名；

#### 访问

> 类名.类变量名;

#### 使用细节

##### 什么时候需要用类变量

- 当我们需要让某个类的所有对象都共享一个变量时，就可以考虑类变量(静态变量) 比如: 定义学生类，统计所有学生交多少钱。

##### 类变量与实例变量区别

- 类变量是该类的所有对象共享的，而实例变量是每个对象独享的

- 加上static称为类变量或静态变量，否则称为实例变量/普通变量/非静态变量

- 类变量是可以通过类名.类变量名或者对象名.类变量名来访问的，推荐前者

- 实例变量不能通过类名.类变量名方式访问

- 类变量是在类加载时就初始化了，也就是说，即使你没有创建对象，只要类加载了，就可以使用类变量了。

- 类变量的生命周期是随类的加载开始，随着类消亡而销毁的

### 类方法

#### 基本介绍

添加static关键字的方法

#### 语法

访问修饰符 static 数据返回类型 方法名() {}

#### 类方法的调用

类名.类方法名

#### 类方法的使用场景

> 当方法中不涉及到任何和对象相关的成员，则可以将方法设计成静态方法，提高开发效率

> 在程序员实际开发，往往会将一些通用的方法，设计成静态方法，这样我们不需要创建对象就可以使用了

#### 类方法的注意事项

1. 类方法和普通方法都是随着类的加载而加载的，将结构信息存储在方法区：

   - 类方法中无this的参数

   - 普通方法中隐含着this的参数

2. 类方法可以通过类名调用，也可以通过对象名调用

3. 普通方法和对象有关，需要通过对象名调用，比如对象名.方法名(参数)，不能通过类名调用

4. 类方法中不允许使用对象和对象有关的关键字。比如this和super。 普通方法可以

5. 类方法(静态方法)中只能访问静态变量或静态方法。

6. 普通成员方法，既可以访问普通变量(方法)，也可以访问静态变量

> 静态方法，只能访问静态的成员，非静态的方法，可以访问静态成员和非静态成员(必须遵守访问权限)

## 理解main方法语法

### 形式

> public static void main(String[] args) {}

1. main方法是java虚拟机在调用

2. java虚拟机需要调用类的main方法，所以该方法的访问权限必须是public的

3. java虚拟机在执行main()方法时不必创建对象，所以该方法必须是static

4. 该方法接收String类型的数组参数，该数组中保存执行java命令时传递给所运行的类的参数

5. java执行的程序 参数1 参数2 参数3

###  main方法

1. 静态方法main 可以访问本类的静态成员

2. 静态方法main不可以访问本类的非静态成员

3. 静态方法main 要访问本类的非静态成员，需要先创建对象，再调用即可

## 代码块

### 基本介绍

> 代码块又称为初始化块，属于类中的成员，类似于方法，将逻辑语句封装在方法体中，通过{} 包围起来
> 和方法不同，没有方法名，没有返回，没有参数,只有方法体，而且不用通过对象或类显示调用，而是加载类时，或创建对象的隐式调用

### 基本语法

```java
[修饰符] {
    代码
};
```

>  注意事项
> 
> 修饰符可选，只能写static
> 
> 代码块分为两种，使用static的和不使用static的
> 
> 逻辑语句可以为任何逻辑语句

；号可以写上，也可以省略。

### 优点

1. 相当于另外一个形式的构造器，可以做初始化的操作

2. 场景：如果多个构造器中的都有重复的语句，可以抽取到初始化块中，提高代码的复用性

### 代码块使用注意事项

1. static 代码块也叫静态代码块，作用就是对类进行初始化，而且它随着类的加载而执行，并且只会执行一次，如果时普通代码块，每创建一个对象，就执行

2. 类什么时候被加载

   -. 创建对象实例时

   - 创建子类对象实例，父类也会被加载

   - 使用类的静态成员时(静态属性，静态方法)

3. 普通的代码块，在创建对象实例时，会被隐式调用，被创建一次，就会调用一次

> 如果只是使用类的静态成员时，普通代码并不会执行

4. **创建一个对象时，在一个类调用顺序是:**

   - 调用静态代码块和静态属性初始化(注意：静态代码块和静态属性初始化调用的优先级一样，如果有多个静态代码块和多个静态变量初始化，则按他们定义的顺序调用)

   - 调用普通代码块和普通属性的初始化(注意：普通代码块和普通属性初始化的优先级一样，如果有多个普通代码块和多个普通属性初始化，则按定义顺序调用)

5. 构造方法(构造器) 的最前面其实隐含了super() 和 调用普通代码块，新写一个类演示，静态相关的代码块，属性初始化，在类加载时，就执行完毕，因此是优先于构造器和普通代码块可执行的

```java
class A {
    public A() {
        super();
        {};
        Sysout.out.ptintln("OK");
    }
}
```

6. 创建一个子类时(继承关系)，他们的静态代码块，静态属性初始化，普通代码块，普通属性初始化，构造方法的调用如下：

   - 父类的静态代码块和静态属性

   - 子类的静态代码块和属性

   - 父类的普通代码块和普通属性初始化

   - 父类的构造方法

   - 子类的普通代码块和普通属性初始化

   - 子类的构造方法

7. 静态代码块只能直接调用静态成员方法(静态属性和静态方法), 普通代码块可以调用任意成员

## 单例设计模式

### 什么是设计模式
1. 静态方法和属性的经典使用

2. 设计模式是在大量的实践中总结和理论化之后优选的代码结构，编程风格、以及解决问题的思考方式。设计模式就像是经典的棋谱 

### 什么是单例模式

1. 所谓类的单例模式，就是采取一定的方法保证在整个的软件中，对某个类只能存在一个对象实例，并且该类只提供一个取得其对象实例的方法

2. 单例模式有两种方式：1. 饿汉式 2. 懒汉式

### 饿汉式和懒汉式的区别

1. 创建对象的时机不同：饿汉式是在类加载就创建了对象实例，而懒汉式是在使用时才创建

2. 饿汉式不存在线程安全问题，懒汉式存在线程安全问题。

3. 饿汉式存在资源浪费的可能，因为如果程序员一个对象都没有使用，那么饿汉式创建对象就浪费了，懒汉式则不存在这种可能

## final关键字

### 基本介绍

> final 可以修饰类、属性、方法和局部变量

1. 当不希望类被继承时，可以用final修饰

2. 当不希望父类的某个方法被子类覆盖/重写时，可以用final关键字

3. 当不希望类的某个属性的值被修改，可以用final修饰

4. 当不希望某个局部变量被修改，可以用final修饰

## 抽象类

## 接口

## 内部类
